{% schema %}
{
  "name": "Coleções Horizontal",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Título da seção",
      "default": "Nossas Coleções"
    },
    {
      "type": "select",
      "id": "card_size",
      "label": "Altura dos cards",
      "options": [
        { "value": "small", "label": "Pequeno" },
        { "value": "medium", "label": "Médio" },
        { "value": "large", "label": "Grande" }
      ],
      "default": "medium"
    },
    {
      "type": "range",
      "id": "card_radius",
      "label": "Borda arredondada (px)",
      "min": 0,
      "max": 50,
      "step": 2,
      "default": 12
    },
    {
      "type": "range",
      "id": "card_gap",
      "label": "Espaçamento entre cards (px)",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24
    },
    {
      "type": "range",
      "id": "cards_desktop",
      "label": "Cards por linha (Desktop)",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 4
    },
    {
      "type": "range",
      "id": "cards_tablet",
      "label": "Cards por linha (Tablet)",
      "min": 1,
      "max": 8,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "cards_mobile",
      "label": "Cards por linha (Mobile)",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 2
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Coleção",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Coleção"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Coleções Horizontal",
      "category": "Custom"
    }
  ]
}
{% endschema %}


{%- assign height_value = '' -%}
{%- case section.settings.card_size -%}
  {%- when 'small' -%}
    {%- assign height_value = '140px' -%}
  {%- when 'medium' -%}
    {%- assign height_value = '180px' -%}
  {%- when 'large' -%}
    {%- assign height_value = '220px' -%}
{%- endcase -%}


<div class="colecoes-section">
  {%- if section.settings.title != blank -%}
    <h2 class="colecoes-title">{{ section.settings.title }}</h2>
  {%- endif -%}

  <div class="colecoes-wrapper">
    {%- for block in section.blocks -%}
      {%- if block.settings.collection != blank -%}
        <div class="colecao-card" {{ block.shopify_attributes }}>
          <a href="{{ block.settings.collection.url }}">
            <div class="colecao-image">
              <img 
                src="{{ block.settings.collection.featured_image | image_url: width: 500 }}" 
                alt="{{ block.settings.collection.title }}" 
                loading="lazy"
                width="500"
                height="500"
              >
            </div>
            <p>{{ block.settings.collection.title }}</p>
          </a>
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>
</div>


<style>
  #shopify-section-{{ section.id }} .colecoes-wrapper {
    display: grid;
    gap: {{ section.settings.card_gap }}px;
    grid-template-columns: repeat({{ section.settings.cards_desktop }}, 1fr);
    justify-content: center;
  }

  #shopify-section-{{ section.id }} .colecao-card {
    text-align: center;
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .colecao-card .colecao-image {
    width: 100%;
    height: {{ height_value }};
    overflow: hidden;
    border-radius: {{ section.settings.card_radius }}px;
  }

  #shopify-section-{{ section.id }} .colecao-card .colecao-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: {{ section.settings.card_radius }}px;
  }

  #shopify-section-{{ section.id }} .colecao-card p {
    margin-top: 8px;
    font-size: 14px;
    text-align: center;
  }

  #shopify-section-{{ section.id }} .colecoes-title {
    text-align: center;
    font-size: 24px;
    margin-bottom: 16px;
  }

  /* Tablet */
  @media (max-width: 1024px) {
    #shopify-section-{{ section.id }} .colecoes-wrapper {
      grid-template-columns: repeat({{ section.settings.cards_tablet }}, 1fr);
    }
  }

  /* Mobile */
  @media (max-width: 600px) {
    #shopify-section-{{ section.id }} .colecoes-wrapper {
      grid-template-columns: repeat({{ section.settings.cards_mobile }}, 1fr);
    }
  }
</style>